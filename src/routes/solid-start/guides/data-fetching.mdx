---
title: "Data Fetching"
---

This guide will walk you through the basics of data fetching in SolidStart, providing practical examples and best practices.

Here's a minimal example of data fetching in SolidStart:

```tsx title="src/routes/index.tsx"
import { For } from "solid-js";
import { query, createAsync } from "@solidjs/router";

const getPosts = query(async () => {
	const posts = await fetch("https://my-api.com/blog");
	return await posts.json();
}, "posts");

export default function Page() {
	const posts = createAsync(() => getPosts());
	return (
		<ul>
			<For each={posts()}>{(post) => <li>{post.title}</li>}</For>
		</ul>
	);
}
```

## Reference

- Solid Router [`query`](https://docs.solidjs.com/solid-router/reference/data-apis/query)
- Solid Router [`createAsync`](https://docs.solidjs.com/solid-router/reference/data-apis/create-async)
- Solid Router [`preload`](https://docs.solidjs.com/solid-router/reference/preload-functions/preload)
- Solid [`createResource`](https://docs.solidjs.com/reference/basic-reactivity/create-resource)
- Solid [`<Suspense>`](https://docs.solidjs.com/reference/components/suspense)
- Solid [`<ErrorBoundary>`](https://docs.solidjs.com/reference/components/error-boundary)

## How to show loading UI

To show a loading UI while data is fetching, you can use [Solid `<Suspense>`](https://docs.solidjs.com/reference/components/suspense):

```tsx {1} {14} {16} title="src/routes/index.tsx"
import { Suspense, For } from "solid-js";
import { query, createAsync } from "@solidjs/router";

const getPosts = query(async () => {
	const posts = await fetch("https://my-api.com/blog");
	return await posts.json();
}, "posts");

export default function Page() {
	const posts = createAsync(() => getPosts());
	return (
		<ul>
			{/* Show a fallback while the data is fetching. */}
			<Suspense fallback={<div>Loading...</div>}>
				<For each={posts()}>{(post) => <li>{post.title}</li>}</For>
			</Suspense>
		</ul>
	);
}
```

## How to handle errors

To show a fallback in case data fetching fails, you can use [Solid `<ErrorBoundary>`](https://docs.solidjs.com/reference/components/error-boundary) .

```tsx {1} {14} {18} title="src/routes/index.tsx"
import { ErrorBoundary, Suspense, For } from "solid-js";
import { query, createAsync } from "@solidjs/router";

const getPosts = query(async () => {
	const posts = await fetch("https://my-api.com/blog");
	return await posts.json();
}, "posts");

export default function Page() {
	const posts = createAsync(() => getPosts());
	return (
		<ul>
			{/* Show a fallback while the data is fetching. */}
			<ErrorBoundary fallback={<div>Something went wrong!</div>}>
				<Suspense fallback={<div>Loading...</div>}>
					<For each={posts()}>{(post) => <li>{post.title}</li>}</For>
				</Suspense>
			</ErrorBoundary>
		</ul>
	);
}
```

## How to preload data

To optimize data fetching during user navigation, you can [`preload`](https://docs.solidjs.com/solid-router/reference/preload-functions/preload) to preload a query:

```tsx {2} {9-11} title="src/routes/index.tsx"
import { ErrorBoundary } from "solid-js";
import { query, createAsync, type RouteDefinition } from "@solidjs/router";

const getPosts = query(async () => {
	const posts = await fetch("https://my-api.com/blog");
	return await posts.json();
}, "posts");

export const route = {
	preload: () => getPosts(),
} satisfies RouteDefinition;

export default function Page() {
	const post = createAsync(() => getPosts());
	return (
		<div>
			<ErrorBoundary fallback={<div>Something went wrong!</div>}>
				<h1>{post().title}</h1>
			</ErrorBoundary>
		</div>
	);
}
```

## How to create parameterized queries

To create a query that accept parameters, you can pass any number of arguments to your query function:

```tsx {9-10} {15} {19-20} title="src/routes/posts/[id]/index.tsx"
import { ErrorBoundary } from "solid-js";
import {
	query,
	createAsync,
	useParams,
	type RouteDefinition,
} from "@solidjs/router";

const getPost = query(async (id: string) => {
	const post = await fetch(`https://my-api.com/blog/posts/${id}`);
	return await post.json();
}, "post");

export const route = {
	preload: ({ params }) => getPost(params.id),
} satisfies RouteDefinition;

export default function Page() {
	const params = useParams();
	const post = createAsync(() => getPost(params.id));
	return (
		<div>
			<ErrorBoundary fallback={<div>Something went wrong!</div>}>
				<h1>{post().title}</h1>
			</ErrorBoundary>
		</div>
	);
}
```

## How to directly use database or an ORM

To directly use your database or ORM in a query, add [`"use server"`](https://docs.solidjs.com/solid-start/reference/server/use-server) to your query function:

```tsx {7} title="src/routes/index.tsx"
import { For, ErrorBoundary } from "solid-js";
import { query, createAsync, type RouteDefinition } from "@solidjs/router";
import { db } from "~/lib/db";

// This query only executes on the server
const getPosts = query(async () => {
	"use server";
	const posts = await db.from("posts").select();
	return await posts.json();
}, "posts");

export const route = {
	preload: () => getPosts(),
} satisfies RouteDefinition;

export default function Page() {
	const posts = createAsync(() => getPosts());
	return (
		<ul>
			<ErrorBoundary fallback={<div>Something went wrong!</div>}>
				<For each={posts()}>{(post) => <li>{post.title}</li>}</For>
			</ErrorBoundary>
		</ul>
	);
}
```

## How to use `createResource` for client-side fetching

To fetch data only on the client side, you can use the [`createResource`](https://docs.solidjs.com/reference/basic-reactivity/create-resource) primitive:

```tsx {1} {4-7} title="src/routes/index.tsx"
import { createResource, ErrorBoundary, Suspense, For } from "solid-js";

export default function Page() {
	const [posts] = createResource(async () => {
		const posts = await fetch("https://my-api.com/blog");
		return await posts.json();
	});

	return (
		<ul>
			<ErrorBoundary fallback={<div>Something went wrong!</div>}>
				<Suspense fallback={<div>Loading...</div>}>
					<For each={posts()}>{(post) => <li>{post.title}</li>}</For>
				</Suspense>
			</ErrorBoundary>
		</ul>
	);
}
```

## When to use Tanstack Query

Consider [Tanstack Query](https://tanstack.com/query/latest) if you need advanced features like automatic background re-fetching or infinite queries. It's particularly appealing if you're already familiar with it from other projects. However, keep in mind that it will increase your bundle size slightly.

Here is a basic example of using Tanstack Query:

```tsx title="src/routes/posts/[id]/index.tsx"
import { ErrorBoundary, Suspense } from "solid-js";
import { useParams } from "@solidjs/router";
import { createQuery } from "@tanstack/solid-query";

export default function Page() {
	const params = useParams();
	const postQuery = createQuery(() => ({
		queryKey: ["posts", params.id],
		queryFn: async (id: string) => {
			const post = await fetch(`https://my-api.com/posts/${id}`);
			return await post.json();
		},
		throwOnError: true,
	}));

	return (
		<div>
			<ErrorBoundary fallback={<div>Something went wrong!</div>}>
				<Suspense fallback={<div>Loading...</div>}>
					<div>{postQuery.data?.name}</div>
				</Suspense>
			</ErrorBoundary>
		</div>
	);
}
```
