---
title: createMiddleware
---

`createMiddleware` creates a configuration object that determines when middleware are executed during the request lifecycle. Learn more about middleware in the [Middleware documentation](/solid-start/advanced/middleware).

`createMiddleware` creates a configuration object that determines when middleware runs during the request lifecycle.

There are two lifecycle events available: `onRequest` and `onBeforeResponse`.

Passing a middleware or an array middleware to them registers the middleware to run on a specific point in the request lifecycle.

`onRequest` triggers when a request comes to the application. The middlewares assigned to it run before the route handlers process the request.
`onBeforeResponse` triggers when a request is processed through route handler but the response hasn't sent to the client.

```ts
import { createMiddleware } from "@solidjs/start/middleware";
import { type FetchEvent } from "@solidjs/start/server";

const middlewareConfig = createMiddleware({
	onRequest: (event) => {
		console.log("Request received:", event.request.url);
	},
	onBeforeResponse: (event) => {
		console.log("Sending response:", event.response.status);
	},
});
```

## Parameters

`createMiddleware` takes an object with the following keys:

- `onRequest` (optional): A function or an array of functions that are executed at the beginning of the request lifecycle, before the request is handled by the route handler.
- `onBeforeResponse` (optional): A function or an array of functions that are executed at the end of the request lifecycle, after the route handler has processed the request, but before the response is sent to the client.

## Returns

`createMiddleware` returns an object that defines when middleware runs during the request lifecycle.
`createMiddleware` returns a configuration object that defines middleware behavior.
