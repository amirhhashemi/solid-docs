---
title: useSubmissions
---

The `useSubmissions` function retrieves the state of all submissions for a given action.

```tsx
import { For, Show } from "solid-js";
import { action, useSubmissions } from "@solidjs/router";

const addTodoAction = action(async (formData: FormData) => {
	const name = formData.get("name")?.toString() ?? "";
	if (name.length <= 2) {
		throw new Error("Name must be larger than 2 characters");
	}
	return name;
}, "add-todo");

export default function AddTodoForm() {
	const submissions = useSubmissions(addTodoAction);
	return (
		<div>
			<form action={addTodoAction} method="post">
				<input name="name" />
				<button type="submit">Add</button>
			</form>
			<For each={submissions}>
				{(submission) => (
					<div>
						<span>Adding "{submission.input[0].get("name")?.toString()}"</span>
						<Show when={submission.pending}>
							<span> (pending...)</span>
						</Show>
						<Show when={submission.result}>
							<span> (completed)</span>
						</Show>
						<Show when={submission.error}>
							{(error) => (
								<>
									<span>{` (Error: ${error().message})`}</span>
									<button onClick={() => submission.retry()}>Retry</button>
								</>
							)}
						</Show>
					</div>
				)}
			</For>
		</div>
	);
}
```

:::note
To access the state of the most recent submission, `useSubmission`[/solid-router/reference/data-apis/use-submission] can be used.
:::

## Filter function

The `useSubmissions` function optionally accepts a second parameter, which is a filter function.
This function is executed for each submission in the order they were created, and only the submissions that meet the filter criteria are returned by `useSubmissions`.
The filter function recieves the input data of the action as its parameter and must return `true` to select the submission or `false` otherwise.

```tsx
import { useSubmissions } from "@solidjs/router";
import { addTodoAction } from "./actions";

function FailedTodos() {
	const failedSubmissions = useSubmissions(
		addTodoAction,
		([formData]: [FormData]) => {
			const name = formData.get("name")?.toString() ?? "";
			return name.length <= 2;
		}
	);
	return (
		<div>
			<p>Failed submissions:</p>
			<For each={failedSubmissions}>
				{(submission) => (
					<div>
						<span>{submission.input[0].get("name")?.toString()}</span>
						<button onClick={() => submission.retry()}>Retry</button>
					</div>
				)}
			</For>
		</div>
	);
}
```

## Parameters

- **action**: The action for which you want to get the submissions.
- **filter** (optional): A filter function.
  When provided, it executes on each submission in the order of creation, returning the submissions that pass the filter.
  It receives the input data of the action as its parameter and must return `true` to select the submission and `false` otherwise.

## Returns

`useSubmissions` returns an array of submissions.
Each submission is an object containing the following properties:

- **input**: The input data of the action.
  This is a reactive value.
- **result**: The value returned from the action.
  This is a reactive value.
- **error**: Any error thrown from the action.
  This is a reactive value.
- **pending**: A boolean indicating whether the action is currently being executed.
  This is a reactive value.
- **clear**: A function that clears the result of the submission.
- **retry**: A function that re-executes the submission with the same input.
