---
title: action
---

The `action` function wraps an asynchronous function and returns an action.
Actions enable data mutations and side effects, often in response to user interactions such as form submissions.
To learn more about actions, see [the actions documentation](/solid-router/concepts/actions).

```tsx
import { action } from "@solidjs/router";

const addTodoAction = action(async (name: string) => {
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ name }),
	});
});
```

## Forms

Actions can be used to handle form submissions by passing them to the `action` prop in the [`<form>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form) element.
The form values will be accessible through the first parameter of the action function, which is a [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) object.

Please note that the `<form>` element **must** have `method="post"`.
When using Server-Side Rendering (SSR), you must provide a unique name as the second parameter to the action function.

```tsx
import { action } from "@solidjs/router";

const addTodoAction = action(async (formData: FormData) => {
	const name = formData.get("name")?.toString();
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ name }),
	});
}, "add-todo");

function TodoForm() {
	return (
		<form action={addTodoAction} method="post">
			<input name="name" />
			<button>Add todo</button>
		</form>
	);
}
```

### The `with` method

Actions have a `with` method that is used to pass additional arguments to the action.
The parameters passed to the `with` method are forwarded to the action function in the same order.
The `FormData` is still available as the last parameter.

```tsx
import { action } from "@solidjs/router";

const addTodoAction = action(async (userId: number, formData: FormData) => {
	const name = formData.get("name")?.toString();
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ userId, name }),
	});
});

function TodoForm() {
	const userId = 1;
	return (
		<form action={addTodoAction.with(userId)} method="post">
			<input name="name" />
			<button>Add todo</button>
		</form>
	);
}
```

## Response helpers

Solid Router provides three response helpers that customize the behavior of the action:

- [`json`](/solid-router/reference/response-helpers/json): Allows returning JSON from the action, which will be accessible as the return value when invoking the action using [`useAction`](/solid-router/reference/data-apis/use-action).
- [`redirect`](/solid-router/reference/response-helpers/redirect): Performs a redirect.
- [`reload`](/solid-router/reference/response-helpers/reload): Revalidates queries.

Response helpers return a [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) object with custom properties recognized by Solid Router.
When a `Response` object is either returned or thrown from an action function, Solid Router handles it automatically.
It's advised not to construct a `Response` object without using response helpers.

```tsx
import { action, redirect, json } from "@solidjs/router";
import { getCurrentUser } from "./auth";

const addTodoAction = action(async (name: string) => {
	const user = await getCurrentUser();
	if (!user) {
		throw redirect("/login");
		// Or
		// return redirect("/login");
	}

	const todo = await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ name }),
	}).then((response) => response.json());
	throw json({ todo });
	// Or
	// return json({ todo });
});
```

## Query revalidation

By default, when an action is invoked, all [queries](/solid-router/reference/data-apis/query) used on the same page are automatically revalidated.
This behavior can be customized using the [response helpers](#response-helpers).

Response helpers accept a parameter that allows to specify which query keys to revalidate in an action.
This can be used to disable revalidation for a specific set of queries or to disable it entirely.

```tsx
import { action, reload } from "@solidjs/router";

const addTodoAction = action(async (name: string) => {
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ name }),
	});
	return reload({ revalidate: [] });
	// return reload({ revalidate: ["getTodos"] });
});
```

In this example, the first `reload` completely disables revalidation.
The second return (which is commented out) only revalidates queries with the `getTodos` query key.
