---
title: useSubmission
---

The `useSubmission` function retrieves the state of the most recent submission for a given action.

```tsx
import { Show } from "solid-js";
import { action, useSubmission } from "@solidjs/router";

const addTodoAction = action(async (formData: FormData) => {
	const name = formData.get("name")?.toString() ?? "";
	if (name.length <= 2) {
		throw new Error("Name must be larger than 2 characters");
	}
}, "addTodo");

function AddTodoForm() {
	const submission = useSubmission(addTodoAction);
	return (
		<form action={addTodoAction} method="post">
			<input name="name" />
			<button type="submit">{submission.pending ? "Adding..." : "Add"}</button>
			<Show when={submission.error}>
				{(error) => (
					<div>
						<p>{error().message}</p>
						<button onClick={() => submission.clear()}>Clear</button>
						<button onClick={() => submission.retry()}>Retry</button>
					</div>
				)}
			</Show>
		</form>
	);
}
```

:::info[Note]
To access the state of all submissions, `useSubmissions`[/solid-router/reference/data-apis/use-submissions] can be used.
:::

## Filter function

The `useSubmission` function optionally accepts a second parameter, which is a filter function.
This function is executed for each submission in the order they were created, and the first submission that meet the filter criteria is returned by `useSubmission`.
The filter function recieves the input data of the action as its parameter and must return `true` to select the submission or `false` otherwise.

```tsx
import { useSubmission } from "@solidjs/router";
import { addTodoAction } from "./actions";

function LatestTodo() {
	const latestValidSubmission = useSubmission(
		addTodoAction,
		([formData]: [FormData]) => {
			const name = formData.get("name")?.toString() ?? "";
			return name.length > 2;
		}
	);
	return <p>Latest valid submission: {latestValidSubmission.result}</p>;
}
```

## Parameters

- **action**: The action for which you want to get the most recent submission.
- **filter** (optional): A filter function.
  When provided, it executes on each submission in the order of creation, returning the first submission that passes the filter.
  It receives the input data of the action as its parameter and must return `true` for the submission to be selected and `false` otherwise.

## Returns

`useSubmission` returns an object containing the following properties:

- **input**: The input data of the action.
  This is a reactive value.
- **result**: The value returned from the action.
  This is a reactive value.
- **error**: Any error thrown from the action.
  This is a reactive value.
- **pending**: A boolean indicating whether the action is currently being executed.
  This is a reactive value.
- **clear**: A function that clears the result of the submission.
- **retry**: A function that re-executes the submission with the same input.
